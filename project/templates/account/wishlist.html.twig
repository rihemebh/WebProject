{% extends 'account/BaseAccount.html.twig' %}
{% block link_info %}{% endblock %}
{% block link_address %} {% endblock %}
{% block link_wish %}"active" {% endblock %}
{% block header %} My WishList {% endblock %}
{% block form %}

    <div class="container">
        <div class="row">

            {% for book in books %}
                {% if book.isLiked(app.user) %}

                    <div class="col card-col">
                        <div class="card " id="{{ book.id }}" style="width: 11.5rem;  margin-bottom: 18px;">
                            <a href="/book/{{ book.id }}"> <img src="{{ book.path }}" class="book-img  card-img-top"
                                                                alt="..."></a>
                            <p class="card-title text-center " style="font-size:80%; color:black">{{ book.nomLivre }}

                            </p>

                            {#                            <div class="card-body">#}
                            {#                                <p class="card-text price text-black" style="font-size:70%"><b>{{ book.prix }} Dt</b>#}
                            {#                                <p class="card-text card_text  " style="font-size:75%">By {{ book.auteur }} </p>#}
                            <a href="/wishlist/remove/{{ book.id }}" class="btn shadow-sm bg-light delete" >
                                <small class="text-black-50">Delete from wishlist <i class="fas fa-heart-broken "  style="font-size:11px;"></i></small>
                            </a>

                            {#                            </div>#}
                        </div>

                    </div>



                {% endif %}
            {% endfor %}
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        function onClickBtnDelete(event) {
            event.preventDefault();
            const url = this.href;
            const card = this.parentElement.parentElement
                .parentElement;
            const row = this.parentElement.parentElement.parentElement;
            axios.get(url).then(function (response) {
                console.log(response.data.message);
                row.removeChild(card);
            });
        }
        document.querySelectorAll('.delete').forEach(function (link) {
            link.addEventListener('click', onClickBtnDelete);
        })
    </script>

{% endblock %}